package org.comstudy21.myweb.model;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.List;

import org.comstudy21.myweb.member.MemberDTO;
import org.comstudy21.myweb.util.JdbcUtil;

public class SaramDAO {
   public static final String SELECT = "SELECT * FROM SARAM";
   public static final String INSERT = "INSERT INTO SARAM(NAME,PHONE,EMAIL)VALUES(?,?,?)";
   public static final String UPDATE = "UPDATE SARAM SET NAME=?, PHONE=?, EMAIL=? WHERE ID=?";
   public static final String SELECT_ONE = "SELECT * FROM SARAM WHERE ID=?";
 //이름으로 검색하는용 (LIKE를쓰는게좋다)
   public static final String SELECT_NAME = "SELECT * FROM SARAM WHERE NAME=?";
   public static final String DELETE = "DELETE FROM SARAM WHERE ID=?";
   
   
   private Connection conn ;
   private Statement stmt ; //statement를 만들필욘없지만만들어본다
   private PreparedStatement pstmt;
   private ResultSet rs;
   
   
   public List<SaramDTO> selectAll() throws SQLException {
	   

	   List<SaramDTO> dtoList = new ArrayList<MemberDTO>;
	   
	   conn = JdbcUtil.getConnection();
	   stmt =conn.createStatement();
	   rs = stmt.executeQuery(SELECT);
		while(rs.next()){
			int id = rs.getInt("id");	
			String name = rs.getString("name");
			String phone = rs.getString("phone");
			String email = rs.getString("email");
			SaramDTO dto = new SaramDTO(id,name,phone,email);
			dtoList.add(dto);
			
			System.out.println(dto);
			}
	   
	      return dtoList;
	   }
   
	   
   public SaramDTO selectOne(SaramDTO dto, int id) throws SQLException {
	   conn = JdbcUtil.getConnection();
	   PreparedStatement pstmt = conn.prepareStatement(SELECT_ONE);
	   pstmt.setInt(1, id);
	   
	      return dto;
	   }
	   
   
	   public SaramDTO findByName(SaramDTO dto,String name) throws SQLException {
		   conn = JdbcUtil.getConnection();
		   PreparedStatement pstmt = conn.prepareStatement(SELECT_NAME);
		   pstmt.setString(1,name);
		   
	      return dto;
	   }
	   
	   public void update(SaramDTO dto) throws SQLException {
		   conn = JdbcUtil.getConnection();
		   PreparedStatement pstmt = conn.prepareStatement(UPDATE);
	      
	   }
	   
	   public void delete(SaramDTO dto, int id) throws SQLException {
		   conn = JdbcUtil.getConnection();
		   PreparedStatement pstmt = conn.prepareStatement(DELETE);
		   pstmt.setInt(1, id);
		   
		   JdbcUtil.close(conn,pstmt,null);
		   
	   }
	   
	   public void insert(SaramDTO dto) throws SQLException {
		   conn = JdbcUtil.getConnection();
		   PreparedStatement pstmt = conn.prepareStatement(INSERT);
		   pstmt.setString(1,dto.getName());
		   pstmt.setString(2,dto.getPhone());
		   pstmt.setString(3,dto.getEmail());
		   
		   JdbcUtil.close(conn, pstmt, null);
	      
	   }

}
